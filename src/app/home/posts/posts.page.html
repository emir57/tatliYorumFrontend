<ion-header>
  <ion-toolbar>
    <ion-title>Ana Sayfa</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div id="container">
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
      <ion-refresher-content pullingIcon="" pullingText="" refreshingSpinner="circles" refreshingText="Yükleniyor...">
      </ion-refresher-content>
    </ion-refresher>
    <div style="width: 100%;height: 50px;padding: 0 10px 0 10px;" class="text-center">
      <i id="refreshtext">Yenilemek için <span>aşağı</span> kaydırınız.
        <div id="downarrow" style="display: none;">
          <ion-icon name="chevron-down-outline"></ion-icon>
        </div>
      </i>
    </div>
    <div id="postSortSettings">
      <ion-button id="sortByLikeBtn" (click)="sortByLike()" fill="clear" shape="round">
        <ion-icon name="heart-outline"></ion-icon>&nbsp;Beğeniye göre sırala
      </ion-button>
      <ion-button id="sortByDateBtn" (click)="sortByDate()" fill="clear" shape="round">
        <ion-icon name="calendar-outline"></ion-icon>&nbsp;Tarihe göre sırala
      </ion-button>
    </div>
    <div id="postcard{{post.id}}" class="postcard" *ngFor="let post of postService.posts" [style]="getColorStyles(post)"
      style="padding:10px">
      <div class="left">
        <span (click)="addLike(post)">
          <ion-icon name="chevron-up-outline"></ion-icon>
        </span>
        <span>{{post.likes}}</span>
        <span (click)="deleteLike(post)" [ngClass]="getDownArrowClass(post)">
          <ion-icon name="chevron-down-outline"></ion-icon>
        </span>
      </div>
      <div class="right">
        <div class="topsection">
          <span>
            <ion-icon name="person-outline"></ion-icon>
          </span>&nbsp;
          <span *ngIf="!post.secretUser && post.user">{{post.user.username}}</span>
          <span *ngIf="post.secretUser">İsimsiz kullanıcı</span>
          <span>
            <ion-icon (click)="showSettings(post)" name="ellipsis-vertical-outline"></ion-icon>
            <ul id="postsetting{{post.id}}" class="list-group postsetting">
              <li *ngIf="post.userId != currentUser.id" (click)="complaintPost(post)"
                class="list-group-item text-warning">
                <ion-icon name="alert-outline"></ion-icon> Şikayet Et
              </li>
              <li *ngIf="post.userId == currentUser.id" (click)="deletePost(post)" class="list-group-item text-danger">
                <ion-icon name="trash-outline"></ion-icon> Sil
              </li>
            </ul>
          </span>
        </div>
        <div>
          {{post.content}}
        </div>
        <hr>
        <div>
          <a style="font-size: small;" (click)="showComments(post)">
            <ion-icon name="chatbubble-ellipses-outline"></ion-icon>&nbsp;{{post.commentCount}} Yorumun tamamını
            görüntüle
          </a>
        </div>
        <div style="display: flex;justify-content: end;margin: 5px;padding: 2px;">
          <span>{{getDate(post.createdDate)}}</span>
        </div>
      </div>
    </div>
  </div>
</ion-content>
